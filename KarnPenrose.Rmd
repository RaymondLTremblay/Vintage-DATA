---
title: "Karn_Penrose"
author: "Axel Leon"
date: "3/8/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r echo=FALSE}
Sys.Date()
```

### Birth Weight and gestation time in relation to maternal age, parity and infant survival

------------------------------------------------------------------------

A study between the relation in mother's age, parity and how this affects infant survival

-   Authors:Mary N. Karn and L.S. Penrose
-   KARN, M. N., & PENROSE, L. S. (1951). Birth weight and gestation time in relation to maternal age, parity and infant survival. Annals of eugenics, 16(2), 147--164.

------------------------------------------------------------------------

> ### Brief introduction by the authors
>
> The present communication continues a statistical analysis (Karn, Lang-Brown. MacKenzie & Penrose , 1951; Karn, 1947) of the relation between birth weight and gestation time, taking into account the mother's age and parity.
>
> The large body of data assembled from the records of U.C.H. Obstetric Hospital for the years 1935-46 contains information about 13, 730 infants (7037 male, 6693 female) and their mothers.

You can download this paper on the following [here](https://doi.org/10.1111/j.1469-1809.1951.tb02469.x)

------------------------------------------------------------------------

Here we can have a look at the data from the appendix

![](images/Screen%20Shot%202022-03-09%20at%209.33.04%20AM.png)

------------------------------------------------------------------------

### Objective {style="color: black"}

This Rmd is to learn how to format the data prior to analyses. The data are collected form the Karn and Penrose, in the same structure they present in the paper, for analysis they needed to be wrangled for effective analysis in R and RStudio.

```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(ggplot2)
library(gt)
library(reshape)
library(janitor)
library(caret)
```

------------------------------------------------------------------------

A small replicable data set

```{r echo=FALSE}
mini=tribble( ~mother_age,~non_survivors,~total_birth,~birth_weight,
14,0,1,3.5,
16,1,1,4,
17,0,1,4.5,
18,0,2,5,
19,0,4,6,
20,0,5,6.5,
22,3,5,7,
25,4,10,7.5)

gt(mini)

```

```{r warning=FALSE, include=FALSE}
T2i <- read_csv("csv_files/T2i.csv")
```

------------------------------------------------------------------------

### Using untable function with our data set from the paper

Create a data frame for all death **0** and surviving babies **1**.

-   Calculate the number of survivors

-   Assign to a new column the code of **0** for all dead babies

-   Assign to a new column the code of **0** for all babies alive

-   Untable (expand) the data set the number of times each conditions are present like the mother's age and the baby's birth weight.

-   bind both data frames in one

-   arrange (sort) by age of mother or weight (your preference)

```{r include=FALSE}


df=as.data.frame(T2i)%>%
  mutate(survivors = total_birth - non_survivors)
df
sum(df$total_birth)

df1<- untable(df[,c(1,2,4,5)], num = df[,"non_survivors"])%>%
  filter(non_survivors >0)%>%
  mutate(Alive_Dead = ifelse(non_survivors >0,0, NA))
df1

df2<- untable(df[,c(1,2,5,4)], num = df[,"survivors"])%>%
  filter(survivors >0)%>%
  mutate(Alive_Dead = ifelse(survivors >0, 1, NA))

df5=bind_rows(df1, df2) # Function in dplyr
df5 %>% arrange(mother_age)
row.names(df5)<-NULL  # this removes the row names
df5 %>% arrange(mother_age)


```

Original data set compared to the data set in which its data was wrangled

```{r}

```
